<div class="mp-pusher" id="mp-pusher">
    <nav id="mp-menu" class="mp-menu mp-cover">

        <div class="mp-level mp-level-open" data-level="1" [ngClass]="{'collapsed': state}" style="">

            <wp-etl-welcome [state]="state" [ngClass]="{'is-minimized': state}"></wp-etl-welcome>
            <ul>
                <!-- ------------------------------ -->
                <!-- loop over the MenuItems Level 1 -->
                <!-- ------------------------------ -->
                <ng-container *ngFor="let menuItem of navItems;let i=index;">
                    <!-- placement="left" container="body" [ngbTooltip]="row.visitSite.length > 20? row.visitSite: ''">{{ row.visitSite | truncate: 20}}</span> -->
                    <li>
                        <!-- -------------------------- -->
                        <!-- First Level Items          -->
                        <!-- -------------------------- -->
                        <a [routerLink]="getRouterLink(menuItem)"  title="" attr.data-realurl="{{setRealUrl(menuItem)}}" routerLinkActive="active" >
                            <wp-etl-svg-icon icon="{{menuItem.iconName}}" class="icon" [ngClass]="{'collapsed': state}" placement="right" container="body" [ngbTooltip]="setTooltip(menuItem.title)"></wp-etl-svg-icon>
                            <span [ngClass]="{'fadeOut': !state, 'fadeIn': state}" class="effect-shine">
                                {{menuItem.title}}
                            </span>
                            <!-- In case of Item with childrens -->
                            <span [ngClass]="{'mp-next': menuItem.hasChildren, 'collapsed': state}"></span>
                        </a>

                        <!-- ----------- -->
                        <!-- Parent Item -->
                        <!-- ----------- -->
                        <ng-container *ngIf="menuItem.hasChildren">
                            <!-- ------------------------------------ -->
                            <!--  Second Level  - Menu Items          -->
                            <!-- ------------------------------------ -->

                            <div class="mp-level" data-level="2" style="">
                                <!-- Back Items ==>  Point to previous layer (layer -level 1)-->
                                <a class="mp-back"  title="" [ngClass]="{'collapsed': state}" [routerLink]="" placement="right" container="body" [ngbTooltip]="setTooltip('Back to MAIN MENU')">
                                    <!-- this is the root menu -->
                                    <span [ngClass]="{'collapsed': state}" class="effect-shine">Main Menu</span>
                                </a>
                                <!-- this is the parent menu Header -->
                                <h2 placement="right" container="body">
                                    <wp-etl-svg-icon icon="{{menuItem.iconName}}" class="icon"  placement="right" container="body" [ngbTooltip]="setTooltip(menuItem.title)"></wp-etl-svg-icon>
                                    <span [ngClass]="{'fadeOut': !state, 'fadeIn': state}" class="effect-shine">
                                        {{menuItem.title}}
                                    </span>
                                </h2>

                                <ul>
                                     <!-- -------------------------------------- -->
                                     <!-- loop over the Sub MenuItems  - Level 2 -->
                                     <!-- -------------------------------------- -->
                                    <ng-container *ngFor="let subMenuItem of menuItem.childrens;let i=index;">

                                        <li>
                                            <!-- -------------------------- -->
                                            <!-- Second Level Items          -->
                                            <!-- -------------------------- -->
                                            <a [routerLink]="getRouterLink(subMenuItem)"  title="" attr.data-realurl="{{setRealUrl(subMenuItem)}}" routerLinkActive="active">
                                                <wp-etl-svg-icon icon="{{subMenuItem.iconName}}" class="icon"  placement="right" container="body" [ngbTooltip]="setTooltip(subMenuItem.title)"></wp-etl-svg-icon>
                                                <span [ngClass]="{'fadeOut': !state, 'fadeIn': state}" class="effect-shine">
                                                    {{subMenuItem.title}}
                                                </span>
                                                <!-- In case of Item with childrens we add the mp-next class -->
                                                <span class="" [ngClass]="{'mp-next': subMenuItem.hasChildren, 'collapsed': state}"></span>
                                            </a>
              
                                            <!-- ----------- -->
                                            <!-- Parent Item -->
                                            <!-- ----------- -->
                                            <ng-container *ngIf="subMenuItem.hasChildren">
                                                
                                                <!-- ------------------------------------ -->
                                                <!--  third Level  - Menu Items          -->
                                                <!-- ------------------------------------ -->


                                                <div class="mp-level" data-level="3" style="">

                                                    <a class="mp-back level-3" title="" [ngClass]="{'collapsed': state}" [routerLink]="">
                                                        <span [ngClass]="{'fadeOut': !state, 'fadeIn': state}" class="effect-shine">
                                                            {{menuItem.title}}
                                                        </span>
                                                        <wp-etl-svg-icon *ngIf="state" icon="{{menuItem.iconName}}" class="icon main"  placement="right" container="body" [ngbTooltip]="setTooltip('Back to ' + menuItem.title)"></wp-etl-svg-icon>
                                                    </a>
                                                    <h2 placement="right" container="body"  placement="right" container="body" [ngbTooltip]="setTooltip(subMenuItem.title)" >
                                                        <wp-etl-svg-icon icon="{{subMenuItem.iconName}}" class="icon"></wp-etl-svg-icon>
                                                        <span [ngClass]="{'fadeOut': !state, 'fadeIn': state}" class="effect-shine">
                                                            {{subMenuItem.title}}
                                                        </span>
                                                    </h2>

                                                    <ul>
                                                        <!-- ------------------------------------------- -->
                                                        <!-- loop over the Sub Sub MenuItems  - Level 3 -->
                                                        <!-- ------------------------------------------- -->

                                                        <ng-container *ngFor="let subSubMenuItem of subMenuItem.childrens;let i=index;">

                                                            <li>
                                                                <a [routerLink]="getRouterLink(subSubMenuItem)"  title="" attr.data-realurl="{{setRealUrl(subSubMenuItem)}}" routerLinkActive="active" >
                                                                    <wp-etl-svg-icon icon="{{subSubMenuItem.iconName}}" class="icon"  placement="right" container="body" [ngbTooltip]="setTooltip(subSubMenuItem.title)"></wp-etl-svg-icon>
                                                                    <span [ngClass]="{'fadeOut': !state, 'fadeIn': state}" class="effect-shine">
                                                                        {{subSubMenuItem.title}}
                                                                    </span>
                                                                    <!-- In case of Item with childrens we add the mp-next class -->
                                                                    <span [ngClass]="{'mp-next': subSubMenuItem.hasChildren, 'collapsed': state}"></span>
                                                                </a>
                                                            </li>

                                                        </ng-container>
                                                    </ul>
                                                </div>

                                            </ng-container>

                                        </li>

                                    </ng-container>
                                </ul>

                            </div>

                        </ng-container>
                    </li>

                </ng-container>

            </ul>
        </div>
    </nav>
</div>